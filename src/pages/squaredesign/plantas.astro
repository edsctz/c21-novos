---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import LeadFormSticky from '../../components/LeadFormSticky.jsx';
import Footer from '../../components/Footer.astro';
---

<Layout 
  title="Plantas dos Apartamentos - Square Design Residence Alphaville | Century 21 Alpha"
  description="Veja as plantas dos apartamentos do Square Design Residence Alphaville. 3 suítes de 94 a 121m², layouts inteligentes e espaços otimizados."
>
  <!-- Header Navigation -->
  <Header />
  
  <!-- Blueprints Section -->
  <section class="py-16 bg-digital-black">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h1 class="text-3xl md:text-4xl font-bold text-white mb-4">
          Plantas dos <span class="text-relentless-gold">Apartamentos</span>
        </h1>
        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
          Conheça os layouts inteligentes e espaços otimizados dos apartamentos de 3 suítes
        </p>
      </div>

      <!-- Blueprint Gallery -->
      <div id="plantas" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Blueprint Images -->
        <div class="blueprint-item cursor-pointer overflow-hidden rounded-xl bg-obsessed-grey border-2 border-digital-medium-grey">
          <img 
            src="/images/squaredesign/plantas/planta-tipo-1-94m2.jpg"
            onerror="this.src='https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'"
            alt="Planta Tipo 1 - 94m² - 3 suítes com living integrado"
            class="w-full h-64 object-cover transition-transform duration-300 hover:scale-105"
            loading="lazy"
          />
          <div class="p-4">
            <h3 class="text-white font-bold text-lg mb-2">Tipo 1 - 94m²</h3>
            <p class="text-gray-300 text-sm">3 suítes • Living integrado • Varanda gourmet</p>
          </div>
        </div>

        <div class="blueprint-item cursor-pointer overflow-hidden rounded-xl bg-obsessed-grey border-2 border-digital-medium-grey">
          <img 
            src="/images/squaredesign/plantas/planta-tipo-2-108m2.jpg"
            onerror="this.src='https://images.unsplash.com/photo-1503387762-592deb58ef4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'"
            alt="Planta Tipo 2 - 108m² - 3 suítes com closet na master"
            class="w-full h-64 object-cover transition-transform duration-300 hover:scale-105"
            loading="lazy"
          />
          <div class="p-4">
            <h3 class="text-white font-bold text-lg mb-2">Tipo 2 - 108m²</h3>
            <p class="text-gray-300 text-sm">3 suítes • Closet na master • Lavabo</p>
          </div>
        </div>

        <div class="blueprint-item cursor-pointer overflow-hidden rounded-xl bg-obsessed-grey border-2 border-digital-medium-grey">
          <img 
            src="/images/squaredesign/plantas/planta-tipo-3-121m2.jpg"
            onerror="this.src='https://images.unsplash.com/photo-1541888946425-d81bb19240f5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'"
            alt="Planta Tipo 3 - 121m² - 3 suítes com escritório"
            class="w-full h-64 object-cover transition-transform duration-300 hover:scale-105"
            loading="lazy"
          />
          <div class="p-4">
            <h3 class="text-white font-bold text-lg mb-2">Tipo 3 - 121m²</h3>
            <p class="text-gray-300 text-sm">3 suítes • Escritório • Varanda ampliada</p>
          </div>
        </div>

        <div class="blueprint-item cursor-pointer overflow-hidden rounded-xl bg-obsessed-grey border-2 border-digital-medium-grey">
          <img 
            src="/images/squaredesign/plantas/planta-cobertura-150m2.jpg"
            onerror="this.src='https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'"
            alt="Planta da Cobertura - 150m² - 3 suítes com terraço"
            class="w-full h-64 object-cover transition-transform duration-300 hover:scale-105"
            loading="lazy"
          />
          <div class="p-4">
            <h3 class="text-white font-bold text-lg mb-2">Cobertura - 150m²</h3>
            <p class="text-gray-300 text-sm">3 suítes • Terraço privativo • Churrasqueira</p>
          </div>
        </div>

        <div class="blueprint-item cursor-pointer overflow-hidden rounded-xl bg-obsessed-grey border-2 border-digital-medium-grey">
          <img 
            src="/images/squaredesign/plantas/planta-terreo.jpg"
            onerror="this.src='https://images.unsplash.com/photo-1484154218962-a197022b5858?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'"
            alt="Planta do Pavimento Térreo - Área comum e portaria"
            class="w-full h-64 object-cover transition-transform duration-300 hover:scale-105"
            loading="lazy"
          />
          <div class="p-4">
            <h3 class="text-white font-bold text-lg mb-2">Pavimento Térreo</h3>
            <p class="text-gray-300 text-sm">Portaria • Salão de festas • Fitness</p>
          </div>
        </div>

        <div class="blueprint-item cursor-pointer overflow-hidden rounded-xl bg-obsessed-grey border-2 border-digital-medium-grey">
          <img 
            src="/images/squaredesign/plantas/planta-area-lazer.jpg"
            onerror="this.src='https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'"
            alt="Planta da Área de Lazer - Piscina e raia olímpica"
            class="w-full h-64 object-cover transition-transform duration-300 hover:scale-105"
            loading="lazy"
          />
          <div class="p-4">
            <h3 class="text-white font-bold text-lg mb-2">Área de Lazer</h3>
            <p class="text-gray-300 text-sm">Raia olímpica • Piscina • Deck molhado</p>
          </div>
        </div>

        <div class="blueprint-item cursor-pointer overflow-hidden rounded-xl bg-obsessed-grey border-2 border-digital-medium-grey">
          <img 
            src="/images/squaredesign/plantas/planta-coworking.jpg"
            onerror="this.src='https://images.unsplash.com/photo-1497366216548-37526070297c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'"
            alt="Planta do Coworking - Espaço de trabalho compartilhado"
            class="w-full h-64 object-cover transition-transform duration-300 hover:scale-105"
            loading="lazy"
          />
          <div class="p-4">
            <h3 class="text-white font-bold text-lg mb-2">Coworking</h3>
            <p class="text-gray-300 text-sm">Salas privativas • Área comum • Wi-Fi</p>
          </div>
        </div>

        <div class="blueprint-item cursor-pointer overflow-hidden rounded-xl bg-obsessed-grey border-2 border-digital-medium-grey">
          <img 
            src="/images/squaredesign/plantas/planta-fitness.jpg"
            onerror="this.src='https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'"
            alt="Planta da Academia - Fitness center completo"
            class="w-full h-64 object-cover transition-transform duration-300 hover:scale-105"
            loading="lazy"
          />
          <div class="p-4">
            <h3 class="text-white font-bold text-lg mb-2">Fitness Center</h3>
            <p class="text-gray-300 text-sm">Musculação • Cardio • Vestiários</p>
          </div>
        </div>

        <div class="blueprint-item cursor-pointer overflow-hidden rounded-xl bg-obsessed-grey border-2 border-digital-medium-grey">
          <img 
            src="/images/squaredesign/plantas/planta-subsolo.jpg"
            onerror="this.src='https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80'"
            alt="Planta do Subsolo - Garagem e depósitos"
            class="w-full h-64 object-cover transition-transform duration-300 hover:scale-105"
            loading="lazy"
          />
          <div class="p-4">
            <h3 class="text-white font-bold text-lg mb-2">Subsolo</h3>
            <p class="text-gray-300 text-sm">Garagem • Depósitos • Área técnica</p>
          </div>
        </div>
      </div>

      <!-- Blueprint Information -->
      <div class="mt-16 max-w-4xl mx-auto">
        <div class="bg-obsessed-grey rounded-2xl p-8 border border-digital-medium-grey">
          <h2 class="text-2xl font-bold text-white mb-6 text-center">
            Informações <span class="text-relentless-gold">Técnicas</span>
          </h2>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <h3 class="text-lg font-semibold text-relentless-gold mb-4">Especificações Gerais</h3>
              <ul class="space-y-2 text-gray-300">
                <li class="flex items-center">
                  <div class="w-2 h-2 bg-relentless-gold rounded-full mr-3"></div>
                  Pé direito: 2,70m
                </li>
                <li class="flex items-center">
                  <div class="w-2 h-2 bg-relentless-gold rounded-full mr-3"></div>
                  Janelas: Esquadrias de alumínio
                </li>
                <li class="flex items-center">
                  <div class="w-2 h-2 bg-relentless-gold rounded-full mr-3"></div>
                  Pisos: Porcelanato 60x60cm
                </li>
                <li class="flex items-center">
                  <div class="w-2 h-2 bg-relentless-gold rounded-full mr-3"></div>
                  Cozinha: Bancada em granito
                </li>
                <li class="flex items-center">
                  <div class="w-2 h-2 bg-relentless-gold rounded-full mr-3"></div>
                  Banheiros: Metais Deca
                </li>
              </ul>
            </div>
            
            <div>
              <h3 class="text-lg font-semibold text-relentless-gold mb-4">Diferenciais</h3>
              <ul class="space-y-2 text-gray-300">
                <li class="flex items-center">
                  <div class="w-2 h-2 bg-relentless-gold rounded-full mr-3"></div>
                  Varanda gourmet integrada
                </li>
                <li class="flex items-center">
                  <div class="w-2 h-2 bg-relentless-gold rounded-full mr-3"></div>
                  Suíte master com closet
                </li>
                <li class="flex items-center">
                  <div class="w-2 h-2 bg-relentless-gold rounded-full mr-3"></div>
                  Living amplo e integrado
                </li>
                <li class="flex items-center">
                  <div class="w-2 h-2 bg-relentless-gold rounded-full mr-3"></div>
                  Lavabo social
                </li>
                <li class="flex items-center">
                  <div class="w-2 h-2 bg-relentless-gold rounded-full mr-3"></div>
                  Área de serviço independente
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Full-Screen Modal for Blueprints -->
  <div id="fullscreen-modal" class="fixed inset-0 bg-black bg-opacity-95 z-50 hidden">
    <!-- Top Bar with Close Button and Counter -->
    <div class="absolute top-0 left-0 right-0 z-20 bg-gradient-to-b from-black/80 to-transparent p-4">
      <div class="flex justify-between items-center">
        <!-- Blueprint Counter -->
        <div class="bg-black/60 backdrop-blur-sm rounded-full px-4 py-2 text-white font-medium">
          <span id="current-blueprint">1</span> / <span id="total-blueprints">9</span>
        </div>
        
        <!-- Close Button -->
        <button 
          id="close-modal" 
          class="bg-black/60 backdrop-blur-sm hover:bg-relentless-gold/20 rounded-full w-12 h-12 flex items-center justify-center text-white text-2xl font-bold transition-all duration-300"
          aria-label="Fechar planta"
        >
          ×
        </button>
      </div>
    </div>

    <!-- Main Blueprint Container -->
    <div class="absolute inset-0 flex items-center justify-center p-4 pt-20 pb-16">
      <!-- Previous Button -->
      <button 
        id="prev-blueprint" 
        class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/60 backdrop-blur-sm hover:bg-relentless-gold/20 rounded-full w-14 h-14 flex items-center justify-center text-white text-2xl font-bold transition-all duration-300 z-10"
        aria-label="Planta anterior"
      >
        ‹
      </button>
      
      <!-- Full-Screen Blueprint -->
      <img 
        id="fullscreen-blueprint" 
        src="" 
        alt="" 
        class="max-w-full max-h-full object-contain rounded-lg shadow-2xl"
      />
      
      <!-- Next Button -->
      <button 
        id="next-blueprint" 
        class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/60 backdrop-blur-sm hover:bg-relentless-gold/20 rounded-full w-14 h-14 flex items-center justify-center text-white text-2xl font-bold transition-all duration-300 z-10"
        aria-label="Próxima planta"
      >
        ›
      </button>
    </div>

    <!-- Bottom Bar with Blueprint Description -->
    <div class="absolute bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-black/80 to-transparent p-4">
      <div class="text-center">
        <p id="blueprint-description" class="text-white text-lg font-medium bg-black/40 backdrop-blur-sm rounded-lg px-4 py-2 inline-block max-w-4xl">
          <!-- Blueprint alt text will be displayed here -->
        </p>
      </div>
    </div>

    <!-- Mobile Navigation Hints -->
    <div class="absolute inset-x-0 bottom-20 text-center text-white/60 text-sm md:hidden">
      <p class="bg-black/40 backdrop-blur-sm rounded-lg px-3 py-1 inline-block">
        Toque nas setas ou deslize para navegar
      </p>
    </div>
  </div>

  <!-- Lead Form Section -->
  <section class="form-section" id="lead-form">
    <div class="container">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
          Receba <span class="text-gold">Tabela de Preços</span> e Plantas
        </h2>
        <p class="text-xl text-gray-300 mb-8">
          Condições especiais de pré-lançamento. Preencha o formulário e receba todas as informações.
        </p>
        
        <div class="form-container">
          <form class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="nome" class="form-label">Nome Completo *</label>
              <input 
                type="text" 
                id="nome" 
                name="nome" 
                required
                class="form-input"
                placeholder="Seu nome completo"
              />
            </div>
            
            <div>
              <label for="email" class="form-label">Email *</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                required
                class="form-input"
                placeholder="seu@email.com"
              />
            </div>
            
            <div>
              <label for="telefone" class="form-label">WhatsApp *</label>
              <input 
                type="tel" 
                id="telefone" 
                name="telefone" 
                required
                class="form-input"
                placeholder="(11) 99999-9999"
              />
            </div>
            
            <div>
              <label for="interesse" class="form-label">Interesse</label>
              <select 
                id="interesse" 
                name="interesse"
                class="form-input"
              >
                <option value="comprar">Comprar para morar</option>
                <option value="investir">Investir</option>
                <option value="informacoes">Apenas informações</option>
              </select>
            </div>
            
            <div class="md:col-span-2">
              <label for="mensagem" class="form-label">Mensagem (opcional)</label>
              <textarea 
                id="mensagem" 
                name="mensagem" 
                rows="4"
                class="form-input resize-none"
                placeholder="Conte-nos mais sobre seu interesse..."
              ></textarea>
            </div>
            
            <div class="md:col-span-2">
              <button 
                type="submit"
                class="form-button"
              >
                📋 Receber Tabela de Preços e Plantas
              </button>
            </div>
          </form>
          
          <div class="mt-6 text-center">
            <p class="text-sm text-gray-400">
              Ao enviar, você concorda com nossa 
              <a href="https://www.c21alpha.com.br/politica-de-privacidade" class="text-gold hover:underline">Política de Privacidade</a>
              e autoriza o contato via WhatsApp, email e telefone.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Final -->
  <section class="py-16 bg-gradient-gold">
    <div class="container text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-digital-black mb-4">
        Escolha Sua Planta Ideal
      </h2>
      <p class="text-xl text-digital-black mb-8 max-w-3xl mx-auto">
        Apartamentos de 3 suítes com layouts inteligentes e espaços otimizados. 
        <strong>Agende sua visita e conheça todas as opções disponíveis.</strong>
      </p>
      
      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
        <a 
          href="https://wa.me/5511947176122?text=Olá! Vi as plantas dos apartamentos e quero agendar uma visita ao Square Design Residence Alphaville."
          target="_blank"
          rel="noopener noreferrer"
          class="bg-digital-black text-relentless-gold font-bold py-4 px-8 rounded-lg text-lg hover:bg-obsessed-grey transition-all duration-300 hover:scale-105"
        >
          📱 Agendar Visita via WhatsApp
        </a>
        
        <a 
          href="tel:+5511947176122"
          class="bg-transparent border-2 border-digital-black text-digital-black font-bold py-4 px-8 rounded-lg text-lg hover:bg-digital-black hover:text-relentless-gold transition-all duration-300 hover:scale-105"
        >
          📞 Ligar Agora
        </a>
      </div>
    </div>
  </section>
  
  <!-- Sticky Lead Form (Mobile) -->
  <LeadFormSticky client:load />
  
  <!-- Footer -->
  <Footer />
</Layout>

<script>
  // Full-Screen Blueprint Viewer Functionality
  document.addEventListener('DOMContentLoaded', function() {
    const blueprintItems = document.querySelectorAll('.blueprint-item img');
    const modal = document.getElementById('fullscreen-modal');
    const fullscreenBlueprint = document.getElementById('fullscreen-blueprint');
    const closeModal = document.getElementById('close-modal');
    const prevButton = document.getElementById('prev-blueprint');
    const nextButton = document.getElementById('next-blueprint');
    const currentBlueprintSpan = document.getElementById('current-blueprint');
    const totalBlueprintsSpan = document.getElementById('total-blueprints');
    const blueprintDescription = document.getElementById('blueprint-description');
    
    let currentBlueprintIndex = 0;
    const blueprints = Array.from(blueprintItems);
    
    // Set total blueprints count
    totalBlueprintsSpan.textContent = blueprints.length;
    
    // Open modal when clicking on blueprint
    blueprints.forEach((img, index) => {
      img.addEventListener('click', function() {
        currentBlueprintIndex = index;
        showBlueprint(currentBlueprintIndex);
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden'; // Prevent background scrolling
      });
    });
    
    // Close modal
    function closeModalFunction() {
      modal.classList.add('hidden');
      document.body.style.overflow = 'auto'; // Restore scrolling
    }
    
    closeModal.addEventListener('click', closeModalFunction);
    
    // Close modal when clicking outside the blueprint
    modal.addEventListener('click', function(e) {
      if (e.target === modal) {
        closeModalFunction();
      }
    });
    
    // Show specific blueprint
    function showBlueprint(index) {
      const img = blueprints[index];
      fullscreenBlueprint.src = img.src.replace('w=800', 'w=1200'); // Higher resolution for full-screen
      fullscreenBlueprint.alt = img.alt;
      blueprintDescription.textContent = img.alt;
      currentBlueprintSpan.textContent = index + 1;
    }
    
    // Previous blueprint
    prevButton.addEventListener('click', function(e) {
      e.stopPropagation();
      currentBlueprintIndex = currentBlueprintIndex > 0 ? currentBlueprintIndex - 1 : blueprints.length - 1;
      showBlueprint(currentBlueprintIndex);
    });
    
    // Next blueprint
    nextButton.addEventListener('click', function(e) {
      e.stopPropagation();
      currentBlueprintIndex = currentBlueprintIndex < blueprints.length - 1 ? currentBlueprintIndex + 1 : 0;
      showBlueprint(currentBlueprintIndex);
    });
    
    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
      if (!modal.classList.contains('hidden')) {
        switch(e.key) {
          case 'Escape':
            closeModalFunction();
            break;
          case 'ArrowLeft':
            prevButton.click();
            break;
          case 'ArrowRight':
            nextButton.click();
            break;
        }
      }
    });

    // Touch/Swipe support for mobile
    let touchStartX = 0;
    let touchEndX = 0;
    
    modal.addEventListener('touchstart', function(e) {
      touchStartX = e.changedTouches[0].screenX;
    });
    
    modal.addEventListener('touchend', function(e) {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    });
    
    function handleSwipe() {
      const swipeThreshold = 50;
      const diff = touchStartX - touchEndX;
      
      if (Math.abs(diff) > swipeThreshold) {
        if (diff > 0) {
          // Swipe left - next blueprint
          nextButton.click();
        } else {
          // Swipe right - previous blueprint
          prevButton.click();
        }
      }
    }
    
    // Form submission handling
    const form = document.querySelector('#lead-form form');
    
    if (form) {
      form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());
        
        // Add UTM data
        const utmData = JSON.parse(localStorage.getItem('utmData') || '{}');
        const submitData = {
          ...data,
          ...utmData,
          timestamp: new Date().toISOString(),
          page_url: window.location.href,
          source_page: 'plantas'
        };
        
        // Track form submission
        if (typeof gtag !== 'undefined') {
          gtag('event', 'generate_lead', {
            event_category: 'Lead Form',
            event_label: 'Blueprints Page Form Submission',
            value: 1
          });
        }
        
        if (typeof fbq !== 'undefined') {
          fbq('track', 'Lead', {
            content_name: 'Square Design Residence - Blueprints',
            content_category: 'Real Estate Lead'
          });
        }
        
        try {
          alert('Obrigado! Em breve entraremos em contato com todas as informações.');
          form.reset();
        } catch (error) {
          console.error('Error:', error);
          alert('Erro ao enviar formulário. Tente novamente ou entre em contato via WhatsApp.');
        }
      });
    }
  });
</script>
